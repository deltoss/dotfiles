"   Intended for Visual Studio IDE's vsvim extension
"   type ':source %' to reload the vim configs

" ##################################################################
" Copied from vimrc, but filtered to only supported options
" ##################################################################

" Leader key configurations
nnoremap <SPACE> <Nop>
vnoremap <SPACE> <Nop>
let mapleader="\<Space>"
set timeoutlen=300

" To have backspace work as intended
set backspace=indent,eol,start

" Use system keyboard
:set clipboard=unnamed
set number " Show line numbers
set relativenumber " Show relative line numbers
set cursorline " Highlight current line
set showcmd " Show incomplete commands
set ignorecase " Ignore case when searching
set smartcase " This makes the search case sensitive if uppercase is entered
set hlsearch " Highlight search results
set incsearch " Makes search act like search in modern browsers

" Tab and Indentation settings
set expandtab                   " Use spaces instead of tabs
set shiftwidth=2                " 1 tab = 2 spaces
set tabstop=2                   " 1 tab = 2 spaces
set softtabstop=2               " Makes backspace treat 2 spaces as a tab
set autoindent                  " Auto indent

" Close mappings
nnoremap Zq :q<cr>
nnoremap ZQ :q<cr>
nnoremap <leader>zq :q<cr>
nnoremap <leader>zz :q<cr>
nnoremap ZW :wq<cr>
nnoremap Zw :wq<cr>
nnoremap <leader>zw :wq<cr>
nnoremap Zb :bd<cr>
nnoremap ZB :bd<cr>
nnoremap <leader>zb :bd<cr>

" Newline mappings
nnoremap <C-Enter> o<Esc>
nnoremap <S-Enter> O<Esc>

" Spelling correction
" See https://www.reddit.com/r/vim/comments/1ac30kt/comment/kjs5yxx/?utm_source=share&utm_medium=web3x&utm_name=web3xcss&utm_term=1&utm_content=share_button
inoremap <C-l> <c-g>u<Esc>[s1z=`]a<c-g>u 

" Undo/redo mappings
nnoremap <C-z> u
vnoremap <C-z> u
inoremap <C-z> <C-o>u
nnoremap <C-y> <C-r>
vnoremap <C-y> <C-r>
inoremap <C-y> <C-o><C-r>

" Paste mappings
inoremap <C-r><C-r> <C-r>*
inoremap <C-r>r <C-r>*
cnoremap <C-r><C-r> <C-o><C-r>*

" Better Navigation
nnoremap <C-u> <C-u>zz
vnoremap <C-u> <C-u>zz
nnoremap <C-d> <C-d>zz
vnoremap <C-d> <C-d>zz
nnoremap <C-e> <C-d>zz
vnoremap <C-e> <C-d>zz
nnoremap n nzz
vnoremap n nzz
nnoremap N Nzz
vnoremap N Nzz

" Wrapped line navigation
" Do not map up/down arrow keys as it conflicts with accepting suggestions in
" Visual Studio
nnoremap <C-Up> gk
vnoremap <C-Up> gk
inoremap <C-Up> <C-o>gk
nnoremap <C-Down> gj
vnoremap <C-Down> gj
inoremap <C-Down> <C-o>gj

" Save with Ctrl+S
nnoremap <C-s> :update<CR>
inoremap <C-s> <Esc>:update<CR>

" Indent and outdent with < and > in visual mode
vnoremap < <gv
vnoremap > >gv

" Map Ctrl+Backspace to delete the previous word in insert mode
" Note: In many terminals, Ctrl+Backspace sends different codes
inoremap <C-BS> <C-w>
" Map Ctrl+Delete to delete the next word in insert mode
inoremap <C-Del> <C-o>dw

" Window operations
nnoremap <leader><Up> :split<CR>
nnoremap <leader><Down> :split<CR>
nnoremap <leader><Left> :vsplit<CR>
nnoremap <leader><Right> :vsplit<CR>

" Delete without yanking
nnoremap <leader>d "_d
vnoremap <leader>d "_d
nnoremap <leader>D "_D
vnoremap <leader>D "_D
nnoremap <leader>x "_x
vnoremap <leader>x "_x
nnoremap <leader>X "_X
vnoremap <leader>X "_X

" Change without yanking
nnoremap <leader>c "_c
vnoremap <leader>c "_c
nnoremap <leader>C "_C
vnoremap <leader>C "_C

" Replace currently selected text with default register
" without yanking it
vnoremap <leader>p "_dP
vnoremap p "_dP

" Join lines
nnoremap <leader>j J

" ##################################################################
" Visual Studio Mappings
" ##################################################################

" Simulates autocomplete behavior
" Make sure to uncheck:
"   Tools > Options > IntelliCode > Advanced
"   > Apply whole line completions on right arrow
imap <C-y> <Tab>

nmap <C-o> :vsc View.NavigateBackward<CR>
vmap <C-o> :vsc View.NavigateBackward<CR>
nmap <C-i> :vsc View.NavigateForward<CR>
vmap <C-i> :vsc View.NavigateForward<CR>

nmap <C-Right> :vsc Edit.NextSubword<CR>
vmap <C-Right> :vsc Edit.NextSubwordExtend<CR>
nmap <C-Left> :vsc Edit.PreviousSubword<CR>
vmap <C-Left> :vsc Edit.PreviousSubwordExtend<CR>
nmap <C-BS> :vsc Edit.SubwordDeleteToStart<CR>
nmap <C-Del> :vsc Edit.SubwordDeleteToEnd<CR>
vmap v :vsc Edit.SubwordExpandSelection<CR>
vmap V :vsc Edit.SubwordContractSelection<CR>

nmap <leader>sp :vsc Window.QuickLaunch<CR>
nmap <leader>zz :vsc Window.CloseDocumentWindow<CR>
nmap <leader>zw :vsc Window.CloseDocumentWindow<CR>
nmap <leader>zb :vsc Window.CloseDocumentWindow<CR>
nmap <leader>en :vsc View.NextError<CR>zz
nmap <leader>ep :vsc View.PreviousError<CR>zz
nmap <leader>mn :vsc Edit.NextBookmark<CR>zz
nmap <leader>mp :vsc Edit.PreviousBookmark<CR>zz
nmap <leader>Tn :vsc View.NextTask<CR>zz
nmap <leader>Tp :vsc View.PreviousTask<CR>zz

nmap <leader>a :vsc AddQuickFile<CR>
nmap <leader>rr :vsc Refactor.Rename<CR><Esc>
nmap <leader>rn :vsc Refactor.Rename<CR><Esc>
nmap <leader>ru :vsc Edit.RemoveAndSort<CR>
nmap <leader>rU :vsc Edit.SortUsings<CR>
nmap <leader>r. :vsc EditorContextMenus.CodeWindow.QuickActionsForPosition<CR>
vmap <leader>r. :vsc EditorContextMenus.CodeWindow.QuickActionsForPosition<CR>
nmap <leader>. :vsc EditorContextMenus.CodeWindow.QuickActionsForPosition<CR>
vmap <leader>. :vsc EditorContextMenus.CodeWindow.QuickActionsForPosition<CR>
nmap <leader>, :vsc Edit.ListMembers<CR>
nmap <leader>ma :vsc Edit.ToggleBookmark<CR>:vsc View.BookmarkWindow<CR>
nmap <leader>mx :vsc Edit.ToggleBookmark<CR>
nmap <leader>md :vsc Edit.ToggleBookmark<CR>
nmap <leader>Ta :vsc Edit.ToggleTaskListShortcut<CR>:vsc View.TaskList<CR>
nmap <leader>Tx :vsc Edit.ToggleTaskListShortcut<CR>
nmap <leader>Td :vsc Edit.ToggleTaskListShortcut<CR>
nmap gcc :vsc Edit.ToggleLineComment<CR>
vmap gcc :vsc Edit.ToggleLineComment<CR>
nmap gcb :vsc Edit.ToggleBlockComment<CR>
vmap gcb :vsc Edit.ToggleBlockComment<CR>
nmap <leader>f :vsc Edit.FormatDocument<CR>
vmap <leader>f :vsc Edit.FormatSelection<CR>

nmap <leader>sc :vsc Edit.GoToAll<CR>
nmap <leader>sg :vsc Edit.GoToText<CR>
nmap <leader>sf :vsc Edit.GoToFile<CR>
nmap <leader>ss :vsc Edit.GoToSymbol<CR>
nmap <leader>sm :vsc Edit.GoToMember<CR>
nmap K :vsc Edit.QuickInfo<CR>
nmap k :vsc Edit.ParameterInfo<CR>
nmap ga :vsc EditorContextMenus.CodeWindow.QuickActionsForPosition<CR>
nmap gA :vsc Edit.ShowNavigateMenu<CR>
nmap gd :vsc Edit.GoToDefinition<CR>
nmap gD :vsc Edit.PeekDefinition<CR>
nmap gi :vsc Edit.GoToImplementation<CR>
nmap gr :vsc Edit.FindAllReferences<CR>
nmap gh :vsc EditorContextMenus.CodeWindow.ViewCallHierarchy<CR>
nmap gt :vsc Edit.GoToType<CR>
nmap zi :vsc Edit.ToggleAllOutlining<CR>
nmap za :vsc Edit.ToggleOutliningExpansion<CR>
nmap zA :vsc Edit.ToggleOutliningExpansion<CR>
nmap zd :vsc Edit.CollapsetoDefinitions<CR>
nmap [[ :vsc Edit.PreviousMethod<CR>zz
vmap [[ :vsc Edit.PreviousMethod<CR>zz
nmap ]] :vsc Edit.NextMethod<CR>zz
vmap ]] :vsc Edit.NextMethod<CR>zz
nmap ]e :vsc View.NextError<CR>zz
vmap ]e :vsc View.NextError<CR>zz
nmap [e :vsc View.PreviousError<CR>zz
vmap [e :vsc View.PreviousError<CR>zz
nmap ]m :vsc Edit.NextBookmark<CR>zz
vmap ]m :vsc Edit.NextBookmark<CR>zz
nmap [m :vsc Edit.PreviousBookmark<CR>zz
vmap [m :vsc Edit.PreviousBookmark<CR>zz
nmap ]T :vsc View.NextTask<CR>zz
vmap ]T :vsc View.NextTask<CR>zz
nmap [T :vsc View.PreviousTask<CR>zz
vmap [T :vsc View.PreviousTask<CR>zz

nmap <leader>nb :vsc Build.RebuildSelection<CR>
nmap <leader>nr :vsc Build.RebuildSolution<CR>
nmap <leader>nc :vsc Build.Cancel<CR>
nmap <leader>ns :vsc Project.ConfigureStartupProjects<CR>
nmap <leader>ba :vsc Debug.ToggleBreakpoint<CR>
nmap <leader>bs :vsc Debug.Start<CR>
nmap <leader>bq :vsc Debug.StopDebugging<CR>
nmap <leader>bw :vsc Debug.StopDebugging<CR>
nmap <leader>bc :vsc Debug.CallStack<CR>
nmap <leader>bi :vsc Debug.Immediate<CR>
nmap <leader>bp :vsc Project.ConfigureStartupProjects<CR>
nmap <leader>bl :vsc Debug.Locals<CR>
nmap <leader>bk :vsc Debug.QuickWatch<CR>
vmap <leader>bk :vsc Debug.QuickWatch<CR>
nmap <leader>k :vsc Debug.QuickWatch<CR>
vmap <leader>k :vsc Debug.QuickWatch<CR>
nmap <C-A-y> :vsc Debug.StepOut<CR>
nmap <C-A-Left> :vsc Debug.StepOut<CR>
nmap <C-A-h> :vsc Debug.StepOver<CR>
nmap <C-A-Down> :vsc Debug.StepOver<CR>
nmap <C-A-a> :vsc Debug.Start<CR>
nmap <C-A-Up> :vsc Debug.Start<CR>
nmap <C-A-e> :vsc Debug.StepInto<CR>
nmap <C-A-Right> :vsc Debug.StepInto<CR>
nmap <C-A-i> :vsc Debug.RunToCursor<CR>
nmap <leader>ts :vsc TestExplorer.RunAllTestsInContext<CR>
nmap <leader>tS :vsc TestExplorer.DebugAllTestsInContext<CR>

nmap <leader>vs :vsc View.SolutionExplorer<CR>
nmap <leader>vj :vsc View.SolutionExplorer<CR>
nmap <leader>vf :vsc Window.SolutionExplorerSearch<CR>
nmap <leader>vt :vsc View.Terminal<CR>
nmap <leader>ve :vsc View.ErrorList<CR>
nmap <leader>ee :vsc View.ErrorList<CR>
nmap <leader>vm :vsc View.BookmarkWindow<CR>
nmap <leader>mm :vsc View.BookmarkWindow<CR>
nmap <leader>vT :vsc View.TaskList<CR>
nmap <leader>Tt :vsc View.TaskList<CR>
nmap <leader>vb :vsc Debug.Breakpoints<CR>
nmap <leader>bb :vsc Debug.Breakpoints<CR>
nmap <leader>vc :vsc Debug.Immediate<CR>
nmap <leader>vi :vsc Debug.Immediate<CR>
nmap <leader>vo :vsc Debug.Output<CR>
nmap <leader>vl :vsc Debug.Output<CR>
nmap <leader>tt :vsc TestExplorer.ShowTestExplorer<CR>
nmap <leader>vt :vsc TestExplorer.ShowTestExplorer<CR>

nmap <leader>gp :vsc Edit.PeekDifference<CR>
nmap <leader>gP :vsc Team.Git.CompareWithUnmodified<CR>
nmap <leader>gd :vsc Team.Git.GoToGitChanges<CR>
nmap <leader>gb :vsc Team.Git.Annotate<CR>
nmap <leader>gh :vsc Team.Git.ViewHistory<CR>
nmap <leader>gH :vsc Team.Git.ViewBranchHistory<CR>
